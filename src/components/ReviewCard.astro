---
import type { ImageMetadata } from 'astro'
import { Image } from 'astro:assets'

const { title, comments, reviewPostPath, imagePath, altText } = Astro.props

const images = import.meta.glob<{ default: ImageMetadata }>(
  '/src/assets/**/*.{jpeg,jpg,png,gif}'
)

if (!images[imagePath])
  throw new Error(
    `"${imagePath}" does not exist in glob: "src/assets/*.{jpeg,jpg,png,gif}"`
  )
---

<div
  class="card flex flex-col items-center border-2 border-teal-800 hover:border-teal-600 rounded-lg md:flex-row md:max-w-xl"
>
  <Image
    src={images[imagePath]()}
    alt={altText}
    class="object-cover w-full rounded-t-lg h-96 md:h-auto md:w-48 md:rounded-none md:rounded-s-lg"
  />

  <div class="flex flex-col justify-between p-4 leading-normal">
    <a
      href={reviewPostPath}
      class="mb-2 text-2xl font-bold tracking-tight hover:text-teal-600"
    >
      {title}
    </a>
    <p class="mb-3 line-clamp-3">
      {comments}
    </p>
  </div>
</div>
